<HTML>
<HEAD>
<TITLE>keymap(5)</TITLE>
</HEAD>
<BODY>
<H1>keymap(5)</H1>
<HR>
<PRE>
<B>NAME</B>
     keymap - keyboard maps

<B>SYNOPSIS</B>
     <B>/etc/keymap</B>

<B>DESCRIPTION</B>
     <B>/etc/keymap</B> is the compressed mapping from keyboard scan codes to  ASCII.
     It  is  made  from  a  keymap  source file consisting of MAP_COLS columns
     (MINIX assigns the value 6 to MAX_COLS,  corresponding  to  key  pressed,
     key+SHIFT,  key+LEFT_ALT,  key+RIGHT_ALT, key+ALT+SHIFT and key+CTRL) and
     NR_SCAN_CODES rows  (MINIX  assigns  the  value  0x80  to  NR_SCAN_CODES,
     corresponding  to  the  number  of  scan  codes  to  be  provided  by the
     keyboard), and each element is 2 bytes  in  length  (see  u16_t  in  type
     definitions). The low order byte corresponds to the character represented
     by the scan code, and the high order  byte  corresponds  to  the  special
     meaning (when CAPS LOCK has effect, if it is a function key, etc.), which
     is converted to binary keymap format using the <B>genmap</B> utility.

  <B>Types</B> <B>(general):</B> <B>&lt;sys/types.h&gt;</B>
     &lt;sys/types.h&gt; defines the <B>u8_t</B> and <B>u16_t</B> types, corresponding to 8 and 16
     bit values.

  <B>Macros:</B> <B>&lt;minix/keymap.h&gt;</B>

     <B>C(</B><I>c</I><B>)</B> <B>-</B> <B>Control</B>
          Maps to control code

     <B>A(</B><I>c</I><B>)</B> <B>-</B> <B>Alt</B>
          Sets the eight bit

     <B>CA(</B><I>c</I><B>)</B> <B>-</B> <B>Control</B>-<B>Alt</B>
          Short for <B>A(C(</B><I>c</I><B>))</B>

     <B>L(</B><I>c</I><B>)</B> <B>-</B> <B>Caps</B> <B>Lock</B>
          Adds Caps Lock effect

     These macros are used in a keymap source file to help  define  keys.   So
     instead  of writing <B>032</B> to put a CTRL-Z in the map you write <B>C('Z')</B>.  The
     <B>L(</B><I>c</I><B>)</B> macro is used in column 0 to tell that the Caps Lock key  is  active
     for this key.  (Caps Lock should only have effect on letters.)

  <B>Definitions:</B> <B>&lt;minix/keymap.h&gt;</B>
     &lt;minix/keymap.h&gt; contains a large number of definitions for special keys,
     like function keys, and keys on the numeric keypad.  They are:

     Escape key and modifiers:  <B>EXT</B>, <B>CTRL</B>, <B>SHIFT</B>, <B>ALT</B>.



     Numeric keypad keys:  <B>HOME</B>, <B>END</B>, <B>UP</B>, <B>DOWN</B>, <B>LEFT</B>, <B>RIGHT</B>, <B>PGUP</B>,  <B>PGDN</B>,  <B>MID</B>
     (numeric '5'), <B>PLUS</B>, <B>INSRT</B>.

     ALT + numpad key:  <B>AHOME</B>, <B>AEND</B>, ..., <B>AINSRT</B>.

     CTRL + numpad:  <B>CHOME</B>, <B>CEND</B>, ..., <B>CINSRT</B>.

     Lock keys:  <B>CALOCK</B> (Caps Lock), <B>NLOCK</B> (Num Lock), <B>SLOCK</B> (Scroll Lock).

     Function keys:  <B>F1</B>, ..., <B>F12</B>.

     ALT - function key:  <B>AF1</B>, ..., <B>AF12</B>.

     CTRL - function key:  <B>CF1</B>, ..., <B>CF12</B>.

     SHIFT - function key:  <B>SF1</B>, ..., <B>SF12</B>.

     ALT - SHIFT - function key:  <B>ASF1</B>, ..., <B>ASF12</B>.

     There is one key definition that isn't  a  key  at  all:   <B>EXTKEY</B>.   This
     keycode  is sent by the keyboard as an indicator that the next keycode is
     special.  For instance both ALT keys have the same keycode, but the right
     ALT key is sent by the keyboard preceded by the EXTKEY keycode.  The same
     is true for the '/' key on the numeric pad versus the other  '/'  key  on
     the  US  keyboard.   (On  other  keyboards  this key may have a different
     symbol.)  The keyboard driver knows that a different key is presses if it
     is preceded by EXTKEY.

  <B>Creating/changing</B> <B>keyboard</B> <B>mapping</B>
     You can create your own keyboard mapping by copying one of  the  existing
     keymap  source  files  (Standard Minix:  <B>kernel/keymaps/*.src</B>, Minix-vmd:
     <B>kernel/ibm/keymaps/*.src</B>) and modifying the desired keys. Once  this  has
     been  done,  you  need to recompile the genmap.c file, either by adding a
     new entry to the Makefile, or by running the following commands:

          <B>cc</B> <B>-DKEYSRC=\"</B><I>keymap</I><B>.src\"</B> <B>genmap.c</B>

     After this, the <B>keymap</B> file can be generated by running:

          <B>a.out</B> <B>&gt;</B> <I>keymap</I><B>.map</B>

     The keymap can be loaded in the keyboard driver by:

          <B>loadkeys</B> <I>keymap</I><B>.map</B>

     It is wise to first run <B>loadkeys</B> on one of the maps  in  <B>/usr/lib/keymaps</B>
     so  that  you can easily revert back to a known keymap with a few taps on
     the up-arrow key and pressing return.  You will otherwise have to fix the
     keymap  with a faulty keymap loaded into the keyboard driver, which is no
     fun.
     When the keymap is to your satisfaction you can copy it to <B>/etc/keymap</B> to
     have it loaded automatically at reboot.

<B>FILES</B>

     <B>/etc/keymap</B>    Default keymap file

<B>SEE</B> <B>ALSO</B>
     <B>loadkeys</B> <B>(1).</B>

<B>AUTHOR</B>
     Victor A. Rodriguez - El bit Fantasma (Bit-Man@Tasa.Com.AR)






































</PRE>
</BODY>
</HTML>
